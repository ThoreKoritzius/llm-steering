{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/thore/Documents/projects/Lethonium/steering-viewer-nextjs/app/concept/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { useState } from \"react\";\n\nexport default function ConceptPage() {\n  const defaultDescription =\n    \"Hover each part of the formula to see what it represents and how we obtain it.\";\n  const [activeDescription, setActiveDescription] = useState(defaultDescription);\n\n  const setDesc = (text: string) => () => setActiveDescription(text);\n  const resetDesc = () => setActiveDescription(defaultDescription);\n\n  return (\n    <div className=\"concept-page\">\n      <div className=\"concept-sheet\">\n        <header className=\"concept-hero\">\n          <span className=\"concept-eyebrow\">Concept Note</span>\n          <h1>Model Steering</h1>\n          <p className=\"concept-lead\">\n            A concise summary of how steering uses sparse autoencoder features to shift a model's\n            internal activations without changing the prompt.\n          </p>\n          <p className=\"concept-source\">\n            Based on Neuronpedia's SAE feature work. Reference:{\" \"}\n            <a href=\"https://www.neuronpedia.org/\" target=\"_blank\" rel=\"noreferrer\">\n              neuronpedia.org\n            </a>\n          </p>\n        </header>\n\n        <section className=\"concept-section concept-definition\">\n          <div className=\"concept-section-header\">\n            <h2>Definition</h2>\n          </div>\n          <div className=\"concept-formula-card\">\n            <div className=\"concept-formula-title\">Steering update</div>\n            <div className=\"concept-formula-math\">\n              <span\n                className=\"concept-formula-var concept-formula-term\"\n                onMouseEnter={setDesc(\"h_l' is the steered layer output returned by the hook.\")}\n                onMouseLeave={resetDesc}\n              >\n                h<sub>l</sub>'\n              </span>\n              <span className=\"concept-formula-op\">=</span>\n              <span\n                className=\"concept-formula-var concept-formula-term\"\n                onMouseEnter={setDesc(\"h_l is the original layer output before steering is applied.\")}\n                onMouseLeave={resetDesc}\n              >\n                h<sub>l</sub>\n              </span>\n              <span className=\"concept-formula-op\">+</span>\n              <span\n                className=\"concept-formula-var concept-formula-term\"\n                onMouseEnter={setDesc(\n                  \"a is the steering coefficient (strength_multiple Ã— steering_strength).\"\n                )}\n                onMouseLeave={resetDesc}\n              >\n                a\n              </span>\n              <span className=\"concept-formula-op\">*</span>\n              <span\n                className=\"concept-formula-var concept-formula-term\"\n                onMouseEnter={setDesc(\"v_f is the SAE decoder vector for feature f (sae.W_dec[feature_index]).\")}\n                onMouseLeave={resetDesc}\n              >\n                v<sub>f</sub>\n              </span>\n            </div>\n            <p className=\"concept-formula-note\">\n              The hook replaces the layer output with a shifted activation:\n              <span className=\"concept-inline-code\">hs = hs + coefficient * steering_vector</span>.\n              a is the coefficient, v<sub>f</sub> is the SAE decoder vector for feature f.\n            </p>\n            <div className=\"concept-formula-explainer\">{activeDescription}</div>\n          </div>\n        </section>\n\n        <section className=\"concept-section\">\n          <div className=\"concept-section-header\">\n            <h2>How features are found (Neuronpedia + SAEs)</h2>\n            <p>\n              Neuronpedia identifies \"features\" in LLMs by training sparse autoencoders (SAEs) on\n              internal activations from a frozen model.\n            </p>\n          </div>\n          <div className=\"concept-grid\">\n            <article className=\"concept-card\">\n              <h3>1. Collect activations</h3>\n              <p>\n                Run large amounts of text through the LLM. At a chosen layer or sublayer, record\n                the activation vector for each token. The base model is not changed.\n              </p>\n            </article>\n            <article className=\"concept-card\">\n              <h3>2. Train a sparse autoencoder</h3>\n              <p>\n                The encoder maps activation vectors to a larger set of latent feature activations,\n                and the decoder maps those latents back to the original activation space. Training\n                optimizes reconstruction loss.\n              </p>\n            </article>\n            <article className=\"concept-card\">\n              <h3>3. Enforce sparsity</h3>\n              <p>\n                Add an L1 penalty so only a few latents fire per token. This encourages\n                disentangled, interpretable features instead of superposition.\n              </p>\n            </article>\n          </div>\n          <div className=\"concept-callout\">\n            <h3>Why this reveals features</h3>\n            <p>\n              With sparsity, each latent behaves like a dictionary entry. Interpret it by finding\n              text snippets that maximize the latent, then optionally steer the model by increasing\n              or decreasing that latent.\n            </p>\n          </div>\n        </section>\n\n        <section className=\"concept-section\">\n          <div className=\"concept-section-header\">\n            <h2>Steering procedure used in this viewer</h2>\n            <p>\n              For each feature being steered, we compute a coefficient, pull the decoder vector,\n              and add a scaled version of that vector to the activations.\n            </p>\n          </div>\n          <ol className=\"concept-steps\">\n            <li>\n              <strong>Compute the coefficient.</strong> Multiply steering strength by the strength\n              multiple.\n            </li>\n            <li>\n              <strong>Get the steering vector.</strong> Use the SAE decoder weights:\n              <span className=\"concept-inline-code\">sae.W_dec[feature_index]</span>.\n            </li>\n            <li>\n              <strong>Apply the update.</strong> Add\n              <span className=\"concept-inline-code\">coefficient * steering_vector</span> to the\n              activations.\n            </li>\n          </ol>\n          <div className=\"concept-note\">\n            <h3>Why we do not scale by top activation (yet)</h3>\n            <p>\n              A common variant multiplies by the top known activation value, and that is valid. We\n              do not do it here because:\n            </p>\n            <ul>\n              <li>\n                We may be missing activations for very sparse features (or have too few test prompts),\n                but we still want those features to be steerable.\n              </li>\n              <li>\n                We want results to be consistent across dashboards, even if different runs have\n                different recorded top activations.\n              </li>\n            </ul>\n            <p>We may add the top-activation scaling option in the future.</p>\n          </div>\n        </section>\n\n        <section className=\"concept-section\">\n          <div className=\"concept-section-header\">\n            <h2>Interpretation and usage flow</h2>\n            <p>\n              Sparse features become interpretable handles. You can locate contexts where a latent\n              fires, understand the shared concept, and then steer with that feature.\n            </p>\n          </div>\n          <div className=\"concept-flow\">\n            <div className=\"concept-flow-item\">Frozen LLM activations</div>\n            <div className=\"concept-flow-arrow\">-&gt;</div>\n            <div className=\"concept-flow-item\">SAE encoder</div>\n            <div className=\"concept-flow-arrow\">-&gt;</div>\n            <div className=\"concept-flow-item\">Sparse features</div>\n            <div className=\"concept-flow-arrow\">-&gt;</div>\n            <div className=\"concept-flow-item\">Interpret and steer</div>\n          </div>\n          <div className=\"concept-panel\">\n            <h3>Gemma Scope</h3>\n            <p>\n              In Gemma Scope, Google trained SAEs across every layer and sublayer output of the\n              Gemma models, producing hundreds of SAEs and millions of learned latents, then hosted\n              them for exploration in Neuronpedia.\n            </p>\n          </div>\n        </section>\n\n        <section className=\"concept-section concept-cta\">\n          <h2>Explore a real steering run</h2>\n          <p>\n            Use the viewer to inspect how different coefficients change output probabilities and\n            compare steering results to prompt-only baselines.\n          </p>\n          <Link href=\"/viewer\" className=\"btn btn-primary btn-large\">\n            Open Viewer\n          </Link>\n        </section>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}