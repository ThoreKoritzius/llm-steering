{"version":3,"sources":["../../../../app/viewer/page.tsx","../../../../app/utils.ts","../../../../app/components/FrameCanvas.tsx","../../../../app/components/PlotCanvas.tsx","../../../../app/components/HistogramCanvas.tsx","../../../../app/components/PromptDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, ChangeEvent } from \"react\";\nimport { AppState, SteeringData, BaselineData, Row, SteeringVector } from \"../types\";\nimport {\n  computeColorScale,\n  computeScaleFromDeltas,\n  formatTargetLabel,\n  baselineLabel,\n} from \"../utils\";\nimport FrameCanvas from \"../components/FrameCanvas\";\nimport PlotCanvas from \"../components/PlotCanvas\";\nimport HistogramCanvas from \"../components/HistogramCanvas\";\nimport PromptDialog from \"../components/PromptDialog\";\n\nconst ARCH_LAYER_COUNT = 42;\n\nexport default function ViewerPage() {\n  const [state, setState] = useState<AppState>({\n    data: null,\n    rows: [],\n    coeffs: [],\n    targets: [],\n    selectedTarget: null,\n    currentIndex: 0,\n    vmin: -1,\n    vmax: 1,\n    baseline: null,\n    steeringVector: null,\n    activeTab: \"frame\",\n  });\n\n  const [selectedModel, setSelectedModel] = useState(\"Gemma2ForCausalLM\");\n  const [status, setStatus] = useState(\"Waiting for data...\");\n  const [showBaseline, setShowBaseline] = useState(true);\n  const [promptDialogOpen, setPromptDialogOpen] = useState(false);\n  const [currentPromptFile, setCurrentPromptFile] = useState<string | null>(null);\n\n  const loadJsonData = (data: SteeringData) => {\n    if (!data || !Array.isArray(data.rows)) {\n      setStatus(\"Invalid JSON: missing rows\");\n      return;\n    }\n\n    const rows = [...data.rows].sort((a, b) => (a.coeff ?? 0) - (b.coeff ?? 0));\n    const coeffs = rows.map((r) => Number(r.coeff ?? 0));\n\n    const targets = Array.isArray(data.targets) ? data.targets : [];\n    let finalTargets = targets;\n    if (!targets.length) {\n      const keys: string[] = [];\n      rows.forEach((row) => {\n        [\"targets\", \"targets_first_token\"].forEach((key) => {\n          const value = row[key as keyof Row];\n          if (value && typeof value === \"object\") {\n            keys.push(...Object.keys(value));\n          }\n        });\n      });\n      finalTargets = [...new Set(keys)];\n    }\n\n    const scale = data.delta_color_scale || {};\n    let vmin = Number.isFinite(scale.vmin_p5) ? scale.vmin_p5! : -1;\n    let vmax = Number.isFinite(scale.vmax_p95) ? scale.vmax_p95! : 1;\n    if (!Number.isFinite(vmin) || !Number.isFinite(vmax)) {\n      const computed = computeColorScale(rows);\n      vmin = computed.vmin;\n      vmax = computed.vmax;\n    }\n\n    setState((prev) => ({\n      ...prev,\n      data,\n      rows,\n      coeffs,\n      targets: finalTargets,\n      selectedTarget: finalTargets[0] || null,\n      currentIndex: 0,\n      vmin,\n      vmax,\n    }));\n\n    setStatus(`Loaded ${rows.length} rows`);\n  };\n\n  const loadBaselineData = (data: SteeringData) => {\n    if (!data || !Array.isArray(data.rows) || !data.rows.length) {\n      return;\n    }\n    const rows = [...data.rows];\n    const plainRow =\n      rows.find((r) => String(r.label || \"\") === \"plain_prompt\") ||\n      rows.find((r) => !r.system_prompt) ||\n      null;\n    const systemRows = rows.filter((r) => r.system_prompt);\n    const selectedRow = systemRows[0] || plainRow || null;\n\n    const scale = data.delta_color_scale || {};\n    let vmin = Number.isFinite(scale.vmin_p5) ? scale.vmin_p5! : -1;\n    let vmax = Number.isFinite(scale.vmax_p95) ? scale.vmax_p95! : 1;\n    const scaleRow = selectedRow || plainRow;\n    if ((vmin == null || vmax == null) && scaleRow?.delta_logprobs?.length) {\n      const computed = computeScaleFromDeltas(scaleRow.delta_logprobs);\n      vmin = computed.vmin;\n      vmax = computed.vmax;\n    }\n\n    const baseline: BaselineData = {\n      data,\n      rows,\n      plainRow,\n      systemRows,\n      selectedRow,\n      vmin: Number.isFinite(vmin) ? vmin : -1,\n      vmax: Number.isFinite(vmax) ? vmax : 1,\n    };\n\n    setState((prev) => ({ ...prev, baseline }));\n\n    const systemCount = systemRows.length;\n    const statusMsg = systemCount\n      ? `Baseline loaded (${systemCount} system prompt${systemCount > 1 ? \"s\" : \"\"})`\n      : \"Baseline loaded (plain prompt)\";\n    setStatus(statusMsg);\n  };\n\n  const routeJsonData = (data: SteeringData, filename: string) => {\n    const name = (filename || \"\").toLowerCase();\n    const isBaseline =\n      data?.run_type === \"prompt_baseline\" ||\n      name.includes(\"baseline\") ||\n      (Array.isArray(data?.rows) && data.rows.length === 1 && !data.delta_color_scale);\n\n    if (isBaseline) {\n      loadBaselineData(data);\n    } else {\n      loadJsonData(data);\n    }\n  };\n\n  const handleFileChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    files.forEach((file) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        try {\n          const data = JSON.parse(reader.result as string);\n          routeJsonData(data, file.name);\n        } catch (err: any) {\n          setStatus(`Invalid JSON: ${err.message}`);\n        }\n      };\n      reader.readAsText(file);\n    });\n  };\n\n  const handleSliderChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const index = Number(event.target.value || 0);\n    setState((prev) => ({\n      ...prev,\n      currentIndex: Math.max(0, Math.min(index, prev.rows.length - 1)),\n    }));\n  };\n\n  const handleTargetChange = (event: ChangeEvent<HTMLSelectElement>) => {\n    setState((prev) => ({ ...prev, selectedTarget: event.target.value }));\n  };\n\n  const handleBaselineSelectChange = (event: ChangeEvent<HTMLSelectElement>) => {\n    if (!state.baseline || !state.baseline.systemRows?.length) {\n      return;\n    }\n    const idx = Number(event.target.value || 0);\n    const selected = state.baseline.systemRows[idx] || state.baseline.systemRows[0];\n    setState((prev) => ({\n      ...prev,\n      baseline: prev.baseline\n        ? { ...prev.baseline, selectedRow: selected }\n        : null,\n    }));\n  };\n\n  const setActiveTab = (tab: \"frame\" | \"prompt\" | \"arch\" | \"vector\") => {\n    setState((prev) => ({ ...prev, activeTab: tab }));\n  };\n\n  const loadPromptFromFolder = async (folderName: string) => {\n    try {\n      setStatus(`Loading ${folderName}...`);\n\n      // Load steering run data\n      const steeringRes = await fetch(`/data/prompts/${folderName}/steering_run.json`);\n      if (steeringRes.ok) {\n        const steeringData = await steeringRes.json();\n        loadJsonData(steeringData);\n      }\n\n      // Load baseline data\n      const baselineRes = await fetch(`/data/prompts/${folderName}/prompt_baseline.json`);\n      if (baselineRes.ok) {\n        const baselineData = await baselineRes.json();\n        loadBaselineData(baselineData);\n      }\n\n      // Load vector data\n      const vectorRes = await fetch(`/data/prompts/${folderName}/steer_vector.json`);\n      if (vectorRes.ok) {\n        const vectorData = await vectorRes.json() as SteeringVector;\n        setState((prev) => ({ ...prev, steeringVector: vectorData }));\n        if (vectorData.modelId) {\n          setSelectedModel(vectorData.modelId);\n        }\n      }\n\n      setCurrentPromptFile(folderName);\n      setStatus(`Loaded ${folderName}`);\n    } catch (err: any) {\n      setStatus(`Error loading ${folderName}: ${err.message}`);\n    }\n  };\n\n  useEffect(() => {\n    // Load default folder on mount\n    loadPromptFromFolder(\"default\");\n  }, []);\n\n  const getCurrentRow = (): Row | null => {\n    return state.rows[state.currentIndex] || null;\n  };\n\n  const currentRow = getCurrentRow();\n  const coeff = currentRow ? Number(currentRow.coeff ?? 0) : 0;\n  const entropy = currentRow?.next_token?.entropy;\n  const target = state.selectedTarget;\n  const logprob =\n    target && currentRow?.targets && currentRow.targets[target]\n      ? currentRow.targets[target].logprob\n      : null;\n  const rank =\n    target && currentRow?.targets_first_token && currentRow.targets_first_token[target]\n      ? currentRow.targets_first_token[target].rank\n      : null;\n  const prob =\n    target && currentRow?.targets_first_token && currentRow.targets_first_token[target]\n      ? currentRow.targets_first_token[target].p\n      : null;\n\n  // Build entropy plot series\n  const entropyRows = state.rows.filter(\n    (r) => r.next_token && r.next_token.entropy != null\n  );\n  const entropyPoints = entropyRows.map((r) => ({\n    x: r.coeff ?? 0,\n    y: r.next_token!.entropy,\n  }));\n  const entropySeries = [\n    {\n      name: \"Entropy\",\n      color: \"#2c3e50\",\n      points: entropyPoints,\n    },\n  ];\n  if (showBaseline && state.baseline && entropyPoints.length) {\n    const minX = Math.min(...entropyPoints.map((p) => p.x));\n    const maxX = Math.max(...entropyPoints.map((p) => p.x));\n    if (state.baseline.selectedRow?.next_token?.entropy != null) {\n      const y = state.baseline.selectedRow.next_token.entropy;\n      entropySeries.push({\n        name: \"System prompt\",\n        color: \"#d56a35\",\n        points: [\n          { x: minX, y },\n          { x: maxX, y },\n        ],\n        dash: [6, 6],\n      } as any);\n    }\n    if (state.baseline.plainRow?.next_token?.entropy != null) {\n      const y = state.baseline.plainRow.next_token.entropy;\n      entropySeries.push({\n        name: \"Plain prompt\",\n        color: \"#6c8fb6\",\n        points: [\n          { x: minX, y },\n          { x: maxX, y },\n        ],\n        dash: [2, 6],\n      } as any);\n    }\n  }\n\n  // Build logprob plot series\n  const logprobRows = target\n    ? state.rows.filter((r) => r.targets && r.targets[target])\n    : [];\n  const logprobPoints = logprobRows.map((r) => ({\n    x: r.coeff ?? 0,\n    y: r.targets![target!].logprob,\n  }));\n  const logprobSeries = target\n    ? [\n        {\n          name: target,\n          color: \"#d56a35\",\n          points: logprobPoints,\n        },\n      ]\n    : [];\n  if (showBaseline && state.baseline && logprobPoints.length && target) {\n    const minX = Math.min(...logprobPoints.map((p) => p.x));\n    const maxX = Math.max(...logprobPoints.map((p) => p.x));\n    if (state.baseline.selectedRow?.targets?.[target]) {\n      const y = state.baseline.selectedRow.targets[target].logprob;\n      logprobSeries.push({\n        name: \"System prompt\",\n        color: \"#2c3e50\",\n        points: [\n          { x: minX, y },\n          { x: maxX, y },\n        ],\n        dash: [6, 6],\n      } as any);\n    }\n    if (state.baseline.plainRow?.targets?.[target]) {\n      const y = state.baseline.plainRow.targets[target].logprob;\n      logprobSeries.push({\n        name: \"Plain prompt\",\n        color: \"#6c8fb6\",\n        points: [\n          { x: minX, y },\n          { x: maxX, y },\n        ],\n        dash: [2, 6],\n      } as any);\n    }\n  }\n\n  const markerX = state.rows[state.currentIndex]?.coeff ?? null;\n\n  return (\n    <div className=\"viewer-container\">\n      {/* Compact Single-Line Header */}\n      <header className=\"viewer-header\">\n        <div className=\"header-flow\">\n          <div className=\"header-item\">\n            <label className=\"header-label\">Model</label>\n            <select\n              className=\"header-select\"\n              value={selectedModel}\n              onChange={(e) => setSelectedModel(e.target.value)}\n            >\n              <option value=\"Gemma2ForCausalLM\">Gemma2ForCausalLM</option>\n              <option value=\"Gemma2-9B-IT\">Gemma2-9B-IT</option>\n              <option value=\"Gemma2-27B-IT\">Gemma2-27B-IT</option>\n            </select>\n          </div>\n\n          <div className=\"header-arrow\">→</div>\n\n          <div className=\"header-item\">\n            <label className=\"header-label\">Steering</label>\n            <div className=\"header-value\">\n              Layer {state.data?.layer ?? \"N\"} / {ARCH_LAYER_COUNT} | {state.data?.max_new_tokens ?? \"--\"} tokens\n            </div>\n          </div>\n\n          <div className=\"header-arrow\">→</div>\n\n          <div className=\"header-item header-prompt\" onClick={() => setPromptDialogOpen(true)}>\n            <label className=\"header-label\">Prompt</label>\n            <div className=\"header-value header-clickable\">\n              {state.data?.prompt || state.baseline?.data?.prompt || \"No prompt loaded\"}\n            </div>\n          </div>\n\n          <label className=\"btn-load\">\n            <input\n              type=\"file\"\n              accept=\".json\"\n              multiple\n              onChange={handleFileChange}\n              style={{ display: \"none\" }}\n            />\n            Load Data\n          </label>\n        </div>\n        <div className=\"header-status\">{status}</div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"viewer-layout\">\n        {/* Left Panel: Visualization */}\n        <section className=\"viewer-panel viewer-main\">\n          <div className=\"panel-header\">\n            <div className=\"panel-tabs\">\n              <button\n                className={`tab ${state.activeTab === \"frame\" ? \"active\" : \"\"}`}\n                onClick={() => setActiveTab(\"frame\")}\n              >\n                Steering Sweep\n              </button>\n              <button\n                className={`tab ${state.activeTab === \"prompt\" ? \"active\" : \"\"}`}\n                onClick={() => setActiveTab(\"prompt\")}\n              >\n                Instructions\n              </button>\n              <button\n                className={`tab ${state.activeTab === \"vector\" ? \"active\" : \"\"}`}\n                onClick={() => setActiveTab(\"vector\")}\n              >\n                Vector\n              </button>\n              <button\n                className={`tab ${state.activeTab === \"arch\" ? \"active\" : \"\"}`}\n                onClick={() => setActiveTab(\"arch\")}\n              >\n                Architecture\n              </button>\n            </div>\n\n            {state.activeTab === \"frame\" && (\n              <div className=\"panel-stats\">\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Coeff</span>\n                  <span className=\"stat-value\">{coeff.toFixed(1)}</span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Entropy</span>\n                  <span className=\"stat-value\">{entropy != null ? entropy.toFixed(3) : \"--\"}</span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Logprob</span>\n                  <span className=\"stat-value\">{logprob != null ? logprob.toFixed(3) : \"--\"}</span>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"panel-content\">\n            {state.activeTab === \"frame\" && currentRow && (\n              <div className=\"frame-view\">\n                <FrameCanvas\n                  row={currentRow}\n                  data={state.data}\n                  vmin={state.vmin}\n                  vmax={state.vmax}\n                />\n                <div className=\"frame-controls\">\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max={Math.max(state.rows.length - 1, 0)}\n                    value={state.currentIndex}\n                    step=\"1\"\n                    onChange={handleSliderChange}\n                    className=\"coeff-slider\"\n                  />\n                  <div className=\"slider-info\">\n                    <span>Coefficient: {coeff.toFixed(1)}</span>\n                    <span>Frame {state.currentIndex + 1} / {state.rows.length}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {state.activeTab === \"prompt\" && (\n              <div className=\"prompt-view\">\n                {state.baseline && state.baseline.systemRows.length > 0 ? (\n                  <>\n                    <div className=\"instruction-selector\">\n                      <label>Select Instruction:</label>\n                      <select\n                        className=\"instruction-select\"\n                        onChange={handleBaselineSelectChange}\n                        value={state.baseline.systemRows.findIndex(\n                          (row) => row === state.baseline?.selectedRow\n                        )}\n                      >\n                        {state.baseline.systemRows.map((row, idx) => (\n                          <option key={idx} value={idx}>\n                            {baselineLabel(row)}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    <FrameCanvas\n                      row={state.baseline.selectedRow!}\n                      data={state.baseline.data}\n                      vmin={state.baseline.vmin}\n                      vmax={state.baseline.vmax}\n                      options={{\n                        title: `Instruction: ${baselineLabel(state.baseline.selectedRow!)}`,\n                        subtitle: `Δ logprob (instruction - plain) | Max tokens: ${\n                          state.baseline.data?.max_new_tokens ?? state.data?.max_new_tokens ?? \"\"\n                        }`,\n                        legendLeft: `Less likely`,\n                        legendRight: `More likely`,\n                      }}\n                    />\n                  </>\n                ) : (\n                  <div className=\"empty-state\">\n                    <p>No instruction data loaded</p>\n                    <p className=\"empty-hint\">Upload a baseline JSON file to compare different instructions</p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {state.activeTab === \"vector\" && (\n              <div className=\"vector-view\">\n                {state.steeringVector ? (\n                  <>\n                    <div className=\"vector-meta\">\n                      <span><strong>Layer:</strong> {state.steeringVector.layer}</span>\n                      <span><strong>Feature:</strong> {state.steeringVector.index}</span>\n                      <span><strong>Dimensions:</strong> {state.steeringVector.vector.length}</span>\n                    </div>\n                    <HistogramCanvas\n                      data={state.steeringVector.vector}\n                      bins={60}\n                      title=\"Value Distribution\"\n                    />\n                  </>\n                ) : (\n                  <div className=\"empty-state\">\n                    <p>No steering vector loaded</p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {state.activeTab === \"arch\" && (\n              <div className=\"arch-view\">\n                <div className=\"arch-header-section\">\n                  <h3>Gemma2ForCausalLM Architecture</h3>\n                  <div className=\"arch-meta-grid\">\n                    <div className=\"arch-meta-item\">\n                      <span className=\"arch-meta-label\">Model</span>\n                      <span className=\"arch-meta-value\">{selectedModel}</span>\n                    </div>\n                    <div className=\"arch-meta-item\">\n                      <span className=\"arch-meta-label\">Total Layers</span>\n                      <span className=\"arch-meta-value\">{ARCH_LAYER_COUNT}</span>\n                    </div>\n                    <div className=\"arch-meta-item\">\n                      <span className=\"arch-meta-label\">Hidden Size</span>\n                      <span className=\"arch-meta-value\">3584</span>\n                    </div>\n                    <div className=\"arch-meta-item\">\n                      <span className=\"arch-meta-label\">Vocab Size</span>\n                      <span className=\"arch-meta-value\">256K</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"arch-flow-container\">\n                  <div className=\"arch-flow\">\n                    {/* Embedding */}\n                    <div className=\"arch-component-card\">\n                      <strong>Token Embedding</strong>\n                      <span className=\"arch-detail\">256K vocab → 3584 dimensions</span>\n                    </div>\n\n                    <div className=\"arch-flow-arrow-large\">↓</div>\n\n                    {/* Decoder Stack */}\n                    <div className=\"arch-decoder-stack\">\n                      <div className=\"arch-decoder-title\">Transformer Decoder Stack</div>\n\n                      <div className=\"arch-active-layer\">\n                        <div className=\"arch-layer-title\">\n                          <strong>Layer {state.data?.layer ?? \"N\"} of 42</strong>\n                          {state.data?.layer != null && (\n                            <div className=\"arch-steering-indicator\">\n                              <span>⚡</span>\n                              <span>Steering Injection Point</span>\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"arch-layer-components\">\n                          <div className=\"arch-component-box\">\n                            <div className=\"box-title\">Multi-Head Attention</div>\n                            <div className=\"box-details\">\n                              <div>• input_layernorm: RMSNorm(3584)</div>\n                              <div>• Q projection: 3584 → 4096</div>\n                              <div>• K projection: 3584 → 2048</div>\n                              <div>• V projection: 3584 → 2048</div>\n                              <div>• output_proj: 4096 → 3584</div>\n                              <div>• post_attention_layernorm</div>\n                            </div>\n                          </div>\n\n                          <div className=\"arch-component-box\">\n                            <div className=\"box-title\">Feed-Forward Network</div>\n                            <div className=\"box-details\">\n                              <div>• pre_feedforward_layernorm</div>\n                              <div>• gate projection: 3584 → 14336</div>\n                              <div>• up projection: 3584 → 14336</div>\n                              <div>• GELU activation</div>\n                              <div>• down projection: 14336 → 3584</div>\n                              <div>• post_feedforward_layernorm</div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"arch-ellipsis\">⋮</div>\n                    </div>\n\n                    <div className=\"arch-flow-arrow-large\">↓</div>\n\n                    {/* Final Norm */}\n                    <div className=\"arch-component-card\">\n                      <strong>Final RMSNorm</strong>\n                      <span className=\"arch-detail\">3584 dim, eps=1e-06</span>\n                    </div>\n\n                    <div className=\"arch-flow-arrow-large\">↓</div>\n\n                    {/* LM Head */}\n                    <div className=\"arch-component-card\">\n                      <strong>Language Model Head</strong>\n                      <span className=\"arch-detail\">3584 → 256K logits</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </section>\n\n        {/* Right Panel: Plots */}\n        <aside className=\"viewer-panel viewer-sidebar\">\n          <div className=\"plot-card\">\n            <div className=\"plot-header\">\n              <div>\n                <h3>Entropy Shift</h3>\n                <p>Next-token entropy</p>\n              </div>\n            </div>\n            <PlotCanvas series={entropySeries} markerX={markerX} />\n          </div>\n\n          <div className=\"plot-card\">\n            <div className=\"plot-header\">\n              <div>\n                <h3>Target Logprob</h3>\n                <p>Phrase probability</p>\n              </div>\n              <select\n                onChange={handleTargetChange}\n                disabled={!state.targets.length}\n                value={state.selectedTarget || \"\"}\n                className=\"target-select\"\n              >\n                {state.targets.length === 0 ? (\n                  <option value=\"\">No targets</option>\n                ) : (\n                  state.targets.map((t) => (\n                    <option key={t} value={t}>\n                      {formatTargetLabel(t)}\n                    </option>\n                  ))\n                )}\n              </select>\n            </div>\n            <PlotCanvas series={logprobSeries} markerX={markerX} />\n            <div className=\"plot-footer\">\n              <div className=\"metric\">\n                <span className=\"metric-label\">Rank</span>\n                <span className=\"metric-value\">{rank != null ? rank : \"--\"}</span>\n              </div>\n              <div className=\"metric\">\n                <span className=\"metric-label\">Prob</span>\n                <span className=\"metric-value\">{prob != null ? prob.toFixed(4) : \"--\"}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Single baseline toggle for all plots */}\n          <div className=\"baseline-toggle-card\">\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={showBaseline}\n                onChange={(e) => setShowBaseline(e.target.checked)}\n              />\n              <span>Show baseline comparison</span>\n            </label>\n          </div>\n        </aside>\n      </main>\n\n      {/* Prompt Selection Dialog */}\n      <PromptDialog\n        isOpen={promptDialogOpen}\n        onClose={() => setPromptDialogOpen(false)}\n        onSelect={loadPromptFromFolder}\n        currentPrompt={currentPromptFile}\n      />\n    </div>\n  );\n}\n","import { ColorRGB, Row } from \"./types\";\n\nexport const STYLE = {\n  titleFont: \"600 52px 'Fraunces', serif\",\n  bodyFont: \"34px 'Space Grotesk', sans-serif\",\n  metaFont: \"28px 'Space Grotesk', sans-serif\",\n  ink: \"#1a1a1a\",\n  meta: \"#4a4d50\",\n};\n\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function deltaToColor(delta: number, vmin: number, vmax: number): ColorRGB {\n  const neutral = { r: 247, g: 244, b: 238 };\n  if (vmax <= vmin) {\n    return { ...neutral, css: `rgb(${neutral.r},${neutral.g},${neutral.b})` };\n  }\n  const x = clamp(delta, vmin, vmax);\n  const t = (x - vmin) / (vmax - vmin);\n\n  if (t < 0.5) {\n    const a = Math.pow((0.5 - t) / 0.5, 0.7);\n    const blue = { r: 42, g: 97, b: 216 };\n    const r = Math.round(neutral.r * (1 - a) + blue.r * a);\n    const g = Math.round(neutral.g * (1 - a) + blue.g * a);\n    const b = Math.round(neutral.b * (1 - a) + blue.b * a);\n    return { r, g, b, css: `rgb(${r},${g},${b})` };\n  }\n  const a = Math.pow((t - 0.5) / 0.5, 0.7);\n  const red = { r: 217, g: 67, b: 58 };\n  const r = Math.round(neutral.r * (1 - a) + red.r * a);\n  const g = Math.round(neutral.g * (1 - a) + red.g * a);\n  const b = Math.round(neutral.b * (1 - a) + red.b * a);\n  return { r, g, b, css: `rgb(${r},${g},${b})` };\n}\n\nexport function textColorForBg(color: ColorRGB): string {\n  const luminance = 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;\n  return luminance < 140 ? \"#ffffff\" : \"#1a1a1a\";\n}\n\nexport function computeColorScale(rows: Row[]): { vmin: number; vmax: number } {\n  const deltas: number[] = [];\n  rows.forEach((row) => {\n    const arr = row.delta_logprobs || [];\n    arr.forEach((d) => deltas.push(d));\n  });\n  if (!deltas.length) {\n    return { vmin: -1, vmax: 1 };\n  }\n  deltas.sort((a, b) => a - b);\n  const lo = deltas[Math.floor(deltas.length * 0.05)];\n  const hi = deltas[Math.floor(deltas.length * 0.95)];\n  let vmin = Number.isFinite(lo) ? lo : -1;\n  let vmax = Number.isFinite(hi) ? hi : 1;\n  if (Math.abs(vmax - vmin) < 1e-6) {\n    vmin -= 1;\n    vmax += 1;\n  }\n  return { vmin, vmax };\n}\n\nexport function computeScaleFromDeltas(deltas: number[] | undefined): { vmin: number; vmax: number } {\n  if (!deltas || !deltas.length) {\n    return { vmin: -1, vmax: 1 };\n  }\n  const sorted = [...deltas].sort((a, b) => a - b);\n  const lo = sorted[Math.floor(sorted.length * 0.05)];\n  const hi = sorted[Math.floor(sorted.length * 0.95)];\n  let vmin = Number.isFinite(lo) ? lo : -1;\n  let vmax = Number.isFinite(hi) ? hi : 1;\n  if (Math.abs(vmax - vmin) < 1e-6) {\n    vmin -= 1;\n    vmax += 1;\n  }\n  return { vmin, vmax };\n}\n\nexport function formatTargetLabel(target: string): string {\n  if (typeof target !== \"string\") {\n    return String(target);\n  }\n  if (target.startsWith(\" \")) {\n    return `[space]${target.slice(1)}`;\n  }\n  return target;\n}\n\nexport function baselineLabel(row: Row | null): string {\n  if (!row) {\n    return \"System prompt\";\n  }\n  if (row.label) {\n    return row.label;\n  }\n  if (row.system_prompt) {\n    const text = row.system_prompt.replace(/\\s+/g, \" \").trim();\n    return text;\n  }\n  return \"System prompt\";\n}\n","\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { Row, SteeringData } from \"../types\";\nimport { STYLE, deltaToColor, textColorForBg } from \"../utils\";\n\ninterface FrameCanvasProps {\n  row: Row;\n  data: SteeringData | null;\n  vmin: number;\n  vmax: number;\n  options?: {\n    title?: string;\n    subtitle?: string;\n    prompt?: string;\n    maxTokens?: number | string;\n    layer?: number;\n    legendLeft?: string;\n    legendRight?: string;\n  };\n}\n\nexport default function FrameCanvas({ row, data, vmin, vmax, options = {} }: FrameCanvasProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    ctx.clearRect(0, 0, width, height);\n    ctx.fillStyle = \"#ffffff\";\n    ctx.fillRect(0, 0, width, height);\n    ctx.textBaseline = \"top\";\n\n    const margin = 70;\n    const lineSpacing = 10;\n    const titleY = 40;\n    const metaY = 110;\n    const bodyY = 180;\n    const maxX = width - margin;\n\n    const coeff = Number(row.coeff ?? 0).toFixed(0);\n    const layer = options.layer ?? data?.layer ?? \"\";\n    const prompt = options.prompt ?? data?.prompt ?? \"\";\n    const maxTokens = options.maxTokens ?? data?.max_new_tokens ?? \"\";\n\n    ctx.font = STYLE.titleFont;\n    ctx.fillStyle = STYLE.ink;\n    const title = options.title ?? `Steering sweep - coeff = ${coeff}  (layer ${layer})`;\n    ctx.fillText(title, margin, titleY);\n\n    ctx.font = STYLE.metaFont;\n    ctx.fillStyle = STYLE.meta;\n    const subtitle =\n      options.subtitle ??\n      `Prompt: \"${prompt}\"   |  Tokens: up to ${maxTokens}   |  Color = Delta logprob (steered - base)`;\n    ctx.fillText(subtitle, margin, metaY);\n\n    ctx.font = STYLE.bodyFont;\n    const fontSize = 34;\n    const lineHeight = fontSize + lineSpacing;\n    let x = margin;\n    let y = bodyY;\n    const padX = 6;\n    const padY = 4;\n    const tokenGap = 2;\n\n    const pieces = row.generated_pieces || [];\n    const deltas = row.delta_logprobs || [];\n\n    for (let i = 0; i < pieces.length; i += 1) {\n      const piece = pieces[i];\n      const delta = deltas[i] ?? 0;\n      const parts = String(piece).split(\"\\n\");\n      for (let pi = 0; pi < parts.length; pi += 1) {\n        const part = parts[pi];\n        if (part) {\n          const w = ctx.measureText(part).width;\n          if (x + w + padX * 2 > maxX) {\n            x = margin;\n            y += lineHeight;\n          }\n          const color = deltaToColor(delta, vmin, vmax);\n          ctx.fillStyle = color.css;\n          ctx.fillRect(x - padX, y - padY, w + padX * 2, fontSize + padY * 2);\n          ctx.fillStyle = textColorForBg(color);\n          ctx.fillText(part, x, y);\n          x += w + padX * 2 + tokenGap;\n        }\n        if (pi < parts.length - 1) {\n          x = margin;\n          y += lineHeight;\n        }\n      }\n      if (y > height - 120) {\n        break;\n      }\n    }\n\n    const legendY = height - 80;\n    ctx.font = STYLE.metaFont;\n    ctx.fillStyle = STYLE.ink;\n    const legendLeft = options.legendLeft ?? \"Less likely\";\n    const legendRight = options.legendRight ?? \"More likely\";\n    ctx.fillText(legendLeft, margin, legendY - 40);\n    ctx.fillText(legendRight, width - margin - 250, legendY - 40);\n\n    const barX0 = margin;\n    const barX1 = width - margin;\n    const barW = barX1 - barX0;\n    for (let i = 0; i < barW; i += 1) {\n      const t = i / Math.max(barW - 1, 1);\n      const d = vmin + t * (vmax - vmin);\n      ctx.strokeStyle = deltaToColor(d, vmin, vmax).css;\n      ctx.beginPath();\n      ctx.moveTo(barX0 + i, legendY);\n      ctx.lineTo(barX0 + i, legendY + 18);\n      ctx.stroke();\n    }\n  }, [row, data, vmin, vmax, options]);\n\n  return (\n    <div className=\"canvas-wrap\">\n      <canvas ref={canvasRef} width=\"1920\" height=\"520\"></canvas>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\ninterface Series {\n  name: string;\n  color: string;\n  points: Point[];\n  dash?: number[];\n}\n\ninterface PlotCanvasProps {\n  series: Series[];\n  markerX?: number | null;\n}\n\nexport default function PlotCanvas({ series, markerX }: PlotCanvasProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const width = canvas.width;\n    const height = canvas.height;\n    ctx.clearRect(0, 0, width, height);\n\n    // White background\n    ctx.fillStyle = \"#ffffff\";\n    ctx.fillRect(0, 0, width, height);\n\n    const padding = { top: 24, right: 18, bottom: 30, left: 48 };\n    const chartW = width - padding.left - padding.right;\n    const chartH = height - padding.top - padding.bottom;\n\n    const allPoints = series.flatMap((s) => s.points);\n    if (!allPoints.length) {\n      ctx.fillStyle = \"#888\";\n      ctx.font = \"14px 'Space Grotesk', sans-serif\";\n      ctx.fillText(\"No data\", padding.left, padding.top + 10);\n      return;\n    }\n\n    let minX = Math.min(...allPoints.map((p) => p.x));\n    let maxX = Math.max(...allPoints.map((p) => p.x));\n    let minY = Math.min(...allPoints.map((p) => p.y));\n    let maxY = Math.max(...allPoints.map((p) => p.y));\n\n    if (minX === maxX) {\n      minX -= 1;\n      maxX += 1;\n    }\n    if (minY === maxY) {\n      minY -= 1;\n      maxY += 1;\n    }\n\n    const yPad = (maxY - minY) * 0.08;\n    minY -= yPad;\n    maxY += yPad;\n\n    const mapX = (x: number) => padding.left + ((x - minX) / (maxX - minX)) * chartW;\n    const mapY = (y: number) => padding.top + (1 - (y - minY) / (maxY - minY)) * chartH;\n\n    // Grid lines\n    ctx.strokeStyle = \"rgba(0,0,0,0.06)\";\n    ctx.lineWidth = 1;\n    const gridCount = 4;\n    for (let i = 0; i <= gridCount; i += 1) {\n      const y = padding.top + (chartH / gridCount) * i;\n      ctx.beginPath();\n      ctx.moveTo(padding.left, y);\n      ctx.lineTo(padding.left + chartW, y);\n      ctx.stroke();\n    }\n\n    // Axes\n    ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    ctx.moveTo(padding.left, padding.top);\n    ctx.lineTo(padding.left, padding.top + chartH);\n    ctx.lineTo(padding.left + chartW, padding.top + chartH);\n    ctx.stroke();\n\n    // Draw series lines\n    series.forEach((s) => {\n      ctx.strokeStyle = s.color;\n      ctx.lineWidth = s.dash ? 2.5 : 3;\n      if (s.dash) {\n        ctx.setLineDash(s.dash);\n      }\n      ctx.beginPath();\n      s.points.forEach((p, idx) => {\n        const x = mapX(p.x);\n        const y = mapY(p.y);\n        if (idx === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n      });\n      ctx.stroke();\n      if (s.dash) {\n        ctx.setLineDash([]);\n      }\n    });\n\n    // Current position marker\n    if (markerX != null && Number.isFinite(markerX)) {\n      const markerXPos = mapX(markerX);\n      ctx.strokeStyle = \"rgba(213, 106, 53, 0.5)\";\n      ctx.lineWidth = 2;\n      ctx.setLineDash([4, 4]);\n      ctx.beginPath();\n      ctx.moveTo(markerXPos, padding.top);\n      ctx.lineTo(markerXPos, padding.top + chartH);\n      ctx.stroke();\n      ctx.setLineDash([]);\n\n      series.forEach((s) => {\n        const closest = s.points.reduce((acc, p) => {\n          if (!acc) return p;\n          return Math.abs(p.x - markerX) < Math.abs(acc.x - markerX) ? p : acc;\n        }, null as Point | null);\n        if (closest) {\n          const x = mapX(closest.x);\n          const y = mapY(closest.y);\n\n          // White outline for visibility\n          ctx.fillStyle = \"#ffffff\";\n          ctx.beginPath();\n          ctx.arc(x, y, 6, 0, Math.PI * 2);\n          ctx.fill();\n\n          // Colored dot\n          ctx.fillStyle = s.color;\n          ctx.beginPath();\n          ctx.arc(x, y, 4.5, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      });\n    }\n\n    // Y-axis labels\n    ctx.fillStyle = \"#666\";\n    ctx.font = \"11px 'Space Grotesk', monospace\";\n    ctx.textAlign = \"right\";\n    ctx.fillText(minY.toFixed(2), padding.left - 6, padding.top + chartH - 2);\n    ctx.fillText(maxY.toFixed(2), padding.left - 6, padding.top + 10);\n\n    // X-axis labels\n    ctx.textAlign = \"center\";\n    ctx.fillText(minX.toFixed(1), padding.left, height - 8);\n    ctx.fillText(maxX.toFixed(1), padding.left + chartW, height - 8);\n  }, [series, markerX]);\n\n  return (\n    <div className=\"canvas-wrap\">\n      <canvas ref={canvasRef} width=\"640\" height=\"240\"></canvas>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\ninterface HistogramCanvasProps {\n  data: number[];\n  bins?: number;\n  title?: string;\n}\n\nexport default function HistogramCanvas({ data, bins = 50, title = \"Distribution\" }: HistogramCanvasProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !data.length) return;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const width = canvas.width;\n    const height = canvas.height;\n    ctx.clearRect(0, 0, width, height);\n\n    ctx.fillStyle = \"#ffffff\";\n    ctx.fillRect(0, 0, width, height);\n\n    const padding = { top: 40, right: 40, bottom: 50, left: 60 };\n    const chartW = width - padding.left - padding.right;\n    const chartH = height - padding.top - padding.bottom;\n\n    // Calculate histogram\n    const min = Math.min(...data);\n    const max = Math.max(...data);\n    const binWidth = (max - min) / bins;\n\n    const histogram: number[] = new Array(bins).fill(0);\n    data.forEach((value) => {\n      const binIndex = Math.min(Math.floor((value - min) / binWidth), bins - 1);\n      histogram[binIndex]++;\n    });\n\n    const maxCount = Math.max(...histogram);\n\n    // Draw title\n    ctx.fillStyle = \"#1a1a1a\";\n    ctx.font = \"600 16px 'Space Grotesk', sans-serif\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(title, width / 2, 24);\n\n    // Draw axes\n    ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(padding.left, padding.top);\n    ctx.lineTo(padding.left, padding.top + chartH);\n    ctx.lineTo(padding.left + chartW, padding.top + chartH);\n    ctx.stroke();\n\n    // Draw grid lines\n    ctx.strokeStyle = \"rgba(0,0,0,0.05)\";\n    ctx.lineWidth = 1;\n    const gridCount = 5;\n    for (let i = 0; i <= gridCount; i++) {\n      const y = padding.top + (chartH / gridCount) * i;\n      ctx.beginPath();\n      ctx.moveTo(padding.left, y);\n      ctx.lineTo(padding.left + chartW, y);\n      ctx.stroke();\n    }\n\n    // Draw bars with different colors for positive/negative values\n    const barWidth = chartW / bins;\n    const zeroValue = 0;\n    histogram.forEach((count, i) => {\n      const barHeight = (count / maxCount) * chartH;\n      const x = padding.left + i * barWidth;\n      const y = padding.top + chartH - barHeight;\n\n      // Calculate the bin's center value\n      const binCenter = min + (i + 0.5) * binWidth;\n      const isPositive = binCenter >= zeroValue;\n\n      // Gradient fill - red for positive, blue for negative\n      const gradient = ctx.createLinearGradient(x, y, x, padding.top + chartH);\n      if (isPositive) {\n        gradient.addColorStop(0, \"#d56a35\"); // Orange/red\n        gradient.addColorStop(1, \"#e89a6e\");\n        ctx.strokeStyle = \"rgba(213, 106, 53, 0.3)\";\n      } else {\n        gradient.addColorStop(0, \"#4287f5\"); // Blue\n        gradient.addColorStop(1, \"#6fa3f7\");\n        ctx.strokeStyle = \"rgba(66, 135, 245, 0.3)\";\n      }\n      ctx.fillStyle = gradient;\n      ctx.fillRect(x, y, barWidth - 1, barHeight);\n\n      // Outline\n      ctx.strokeRect(x, y, barWidth - 1, barHeight);\n    });\n\n    // Draw Y-axis labels\n    ctx.fillStyle = \"#4a4d50\";\n    ctx.font = \"12px 'Space Grotesk', sans-serif\";\n    ctx.textAlign = \"right\";\n    ctx.textBaseline = \"middle\";\n    for (let i = 0; i <= gridCount; i++) {\n      const y = padding.top + (chartH / gridCount) * i;\n      const value = Math.round(maxCount * (1 - i / gridCount));\n      ctx.fillText(String(value), padding.left - 8, y);\n    }\n\n    // Draw X-axis labels\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"top\";\n    const xLabelCount = 5;\n    for (let i = 0; i <= xLabelCount; i++) {\n      const x = padding.left + (chartW / xLabelCount) * i;\n      const value = min + ((max - min) / xLabelCount) * i;\n      ctx.fillText(value.toFixed(3), x, padding.top + chartH + 8);\n    }\n\n    // Axis labels\n    ctx.fillStyle = \"#2b2f33\";\n    ctx.font = \"600 13px 'Space Grotesk', sans-serif\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Value\", width / 2, height - 12);\n\n    ctx.save();\n    ctx.translate(20, height / 2);\n    ctx.rotate(-Math.PI / 2);\n    ctx.fillText(\"Frequency\", 0, 0);\n    ctx.restore();\n\n    // Statistics box\n    const mean = data.reduce((a, b) => a + b, 0) / data.length;\n    const sortedData = [...data].sort((a, b) => a - b);\n    const median = sortedData[Math.floor(data.length / 2)];\n    const variance = data.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / data.length;\n    const stdDev = Math.sqrt(variance);\n\n    const statsX = padding.left + chartW - 150;\n    const statsY = padding.top + 10;\n    const statsW = 140;\n    const statsH = 90;\n\n    ctx.fillStyle = \"rgba(255, 255, 255, 0.95)\";\n    ctx.fillRect(statsX, statsY, statsW, statsH);\n    ctx.strokeStyle = \"rgba(0, 0, 0, 0.1)\";\n    ctx.lineWidth = 1;\n    ctx.strokeRect(statsX, statsY, statsW, statsH);\n\n    ctx.fillStyle = \"#2b2f33\";\n    ctx.font = \"600 12px 'Space Grotesk', sans-serif\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"top\";\n\n    const stats = [\n      `Dimensions: ${data.length}`,\n      `Mean: ${mean.toFixed(4)}`,\n      `Median: ${median.toFixed(4)}`,\n      `Std Dev: ${stdDev.toFixed(4)}`,\n      `Range: [${min.toFixed(3)}, ${max.toFixed(3)}]`,\n    ];\n\n    stats.forEach((stat, i) => {\n      ctx.fillText(stat, statsX + 8, statsY + 8 + i * 16);\n    });\n  }, [data, bins, title]);\n\n  return (\n    <div className=\"canvas-wrap\">\n      <canvas ref={canvasRef} width=\"960\" height=\"480\"></canvas>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\ninterface PromptDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelect: (folderName: string) => void;\n  currentPrompt: string | null;\n}\n\nexport default function PromptDialog({ isOpen, onClose, onSelect, currentPrompt }: PromptDialogProps) {\n  const [promptFolders, setPromptFolders] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLoading(true);\n      fetch(\"/api/prompts\")\n        .then((res) => res.json())\n        .then((data: string[]) => {\n          setPromptFolders(data);\n          setLoading(false);\n        })\n        .catch((err) => {\n          console.error(\"Failed to load prompts:\", err);\n          setLoading(false);\n        });\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const handleSelect = (folderName: string) => {\n    onSelect(folderName);\n    onClose();\n  };\n\n  const formatFolderName = (name: string) => {\n    return name\n      .split(/[-_]/)\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(\" \");\n  };\n\n  return (\n    <div className=\"dialog-overlay\" onClick={onClose}>\n      <div className=\"dialog-content\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"dialog-header\">\n          <h3>Select Prompt</h3>\n          <button className=\"dialog-close\" onClick={onClose}>\n            ✕\n          </button>\n        </div>\n\n        <div className=\"dialog-body\">\n          {loading ? (\n            <div className=\"dialog-loading\">Loading prompts...</div>\n          ) : (\n            <div className=\"prompt-list\">\n              {promptFolders.map((folder) => (\n                <div\n                  key={folder}\n                  className={`prompt-item ${currentPrompt === folder ? \"active\" : \"\"}`}\n                  onClick={() => handleSelect(folder)}\n                >\n                  <div className=\"prompt-item-header\">\n                    <strong>{formatFolderName(folder)}</strong>\n                    {currentPrompt === folder && (\n                      <span className=\"prompt-item-badge\">Active</span>\n                    )}\n                  </div>\n                  <p className=\"prompt-item-description\">\n                    Load experiment data from {folder}/ folder\n                  </p>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}